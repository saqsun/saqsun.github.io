"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[852],{8545:function(e,t,i){i.d(t,{U:function(){return s}});const s={castle:{animations:{"wreck black":"wreck black","wreck white":"wreck white"},skeleton:null},shield:{animations:{hide:"hide",idle:"idle",show:"show"},skeleton:null}}},6495:function(e,t,i){i.d(t,{P:function(){return s}});const s={"winner-text":"winner-text.png","loser-text":"loser-text.png","loser-castle":"loser-castle.png","winner-castle":"winner-castle.png","intro-logo-dark":"intro-logo-dark.png","intro-logo-light":"intro-logo-light.png","intro-tutorial-fence":"intro-tutorial-fence.png","winner-stars":"winner-stars.png",laurel:"laurel.png","bonus-glow":"bonus-glow.png","fever-bg-glow":"fever-bg-glow.png","bg-cloud-01":"bg-cloud-01.png","intro-tutorial-hand":"intro-tutorial-hand.png",castle:"castle.png","brick-outline-01":"brick-outline-01.png","fever-bg":"fever-bg.png","bg-mountain-02":"bg-mountain-02.png","versus-vs":"versus-vs.png","bg-mountain-03":"bg-mountain-03.png","rank-bg":"rank-bg.png","brick-outline-02":"brick-outline-02.png","fire-trail":"fire-trail.png","brick-bg":"brick-bg.png","fever-fill":"fever-fill.png","rank-fill-bronze":"rank-fill-bronze.png","rank-fill-challenger":"rank-fill-challenger.png","rank-fill-diamond":"rank-fill-diamond.png","rank-fill-god":"rank-fill-god.png","rank-fill-gold":"rank-fill-gold.png","rank-fill-iron":"rank-fill-iron.png","rank-fill-master":"rank-fill-master.png","rank-fill-platinum":"rank-fill-platinum.png","rank-fill-silver":"rank-fill-silver.png","btn-blue":"btn-blue.png","btn-disable":"btn-disable.png","btn-yellow":"btn-yellow.png","brick-outline-03":"brick-outline-03.png","bg-mountain-01":"bg-mountain-01.png","bonus-big-ball":"bonus-big-ball.png","icon-theme-light":"icon-theme-light.png","bonus-new-ball":"bonus-new-ball.png","bonus-shield":"bonus-shield.png","icon-haptic-on":"icon-haptic-on.png","rank-star-challenger":"rank-star-challenger.png","rank-star-god":"rank-star-god.png","rank-star-bronze":"rank-star-bronze.png","rank-star-diamond":"rank-star-diamond.png","rank-star-gold":"rank-star-gold.png","rank-star-iron":"rank-star-iron.png","rank-star-master":"rank-star-master.png","rank-star-platinum":"rank-star-platinum.png","rank-star-silver":"rank-star-silver.png","icon-theme-dark":"icon-theme-dark.png","icon-sound-off":"icon-sound-off.png","icon-sound-on":"icon-sound-on.png","brick-part-10":"brick-part-10.png","brick-part-04":"brick-part-04.png","icon-haptic-off":"icon-haptic-off.png","white-border":"white-border.png","brick-part-09":"brick-part-09.png",ball:"ball.png","brick-part-07":"brick-part-07.png","brick-part-01":"brick-part-01.png","brick-part-06":"brick-part-06.png","fire-ball":"fire-ball.png","brick-part-08":"brick-part-08.png","brick-part-03":"brick-part-03.png","brick-part-05":"brick-part-05.png","brick-part-02":"brick-part-02.png","brick-corner":"brick-corner.png","snow-particle":"snow-particle.png","ui-stroke-horizontal":"ui-stroke-horizontal.png","ui-stroke-vertical":"ui-stroke-vertical.png","white-square":"white-square.png","rank-fill-grandmaster":"rank-fill-grandmaster.png","rank-star-grandmaster":"rank-star-grandmaster.png"}},3268:function(e,t,i){let s,a,n,r,o,l,d,u,p,c,h,_,g,U,f,m,b,k,v,y,w,M,S,T,B,Z,x;i.d(t,{CA:function(){return a},L6:function(){return k},N:function(){return c},PV:function(){return u},Vr:function(){return S},XZ:function(){return l},ce:function(){return T},d5:function(){return f},dY:function(){return m},it:function(){return h},iv:function(){return M},mK:function(){return d},mr:function(){return r},o9:function(){return p},qN:function(){return o},u2:function(){return y},xh:function(){return n},xw:function(){return x}}),function(e){e.uuidUpdate="AreaModelUuidUpdate"}(s||(s={})),function(e){e.configUpdate="BallModelConfigUpdate",e.damageUpdate="BallModelDamageUpdate",e.radiusUpdate="BallModelRadiusUpdate",e.radiusTimeUpdate="BallModelRadiusTimeUpdate",e.killTimeUpdate="BallModelKillTimeUpdate",e.positionUpdate="BallModelPositionUpdate",e.velocityUpdate="BallModelVelocityUpdate",e.playerIdUpdate="BallModelPlayerIdUpdate",e.feverModeUpdate="BallModelFeverModeUpdate",e.uuidUpdate="BallModelUuidUpdate"}(a||(a={})),function(e){e.ballsUpdate="BallSetModelBallsUpdate",e.mainBallUpdate="BallSetModelMainBallUpdate",e.bonusBallUpdate="BallSetModelBonusBallUpdate",e.speedFactorUpdate="BallSetModelSpeedFactorUpdate",e.uuidUpdate="BallSetModelUuidUpdate"}(n||(n={})),function(e){e.configUpdate="BonusModelConfigUpdate",e.stateUpdate="BonusModelStateUpdate",e.typeUpdate="BonusModelTypeUpdate",e.positionUpdate="BonusModelPositionUpdate",e.playerIdUpdate="BonusModelPlayerIdUpdate",e.spawnTimeUpdate="BonusModelSpawnTimeUpdate",e.despawnTimeUpdate="BonusModelDespawnTimeUpdate",e.effectTimeUpdate="BonusModelEffectTimeUpdate",e.uuidUpdate="BonusModelUuidUpdate"}(r||(r={})),function(e){e.bonusUpdate="BonusSetModelBonusUpdate",e.uuidUpdate="BonusSetModelUuidUpdate"}(o||(o={})),function(e){e.typeUpdate="CastleModelTypeUpdate",e.stateUpdate="CastleModelStateUpdate",e.fenceIdUpdate="CastleModelFenceIdUpdate",e.livesUpdate="CastleModelLivesUpdate",e.uuidUpdate="CastleModelUuidUpdate"}(l||(l={})),function(e){e.timeUpdate="CounterModelTimeUpdate",e.remainingUpdate="CounterModelRemainingUpdate",e.uuidUpdate="CounterModelUuidUpdate"}(d||(d={})),function(e){e.bricksUpdate="FenceModelBricksUpdate",e.soldiersUpdate="FenceModelSoldiersUpdate",e.castleUpdate="FenceModelCastleUpdate",e.maxLifeUpdate="FenceModelMaxLifeUpdate",e.flagUpdate="FenceModelFlagUpdate",e.shieldUpdate="FenceModelShieldUpdate",e.healthUpdate="FenceModelHealthUpdate",e.uuidUpdate="FenceModelUuidUpdate"}(u||(u={})),function(e){e.configUpdate="FeverModelConfigUpdate",e.progressUpdate="FeverModelProgressUpdate",e.activeUpdate="FeverModelActiveUpdate",e.playerIdUpdate="FeverModelPlayerIdUpdate",e.ballIdUpdate="FeverModelBallIdUpdate",e.uuidUpdate="FeverModelUuidUpdate"}(p||(p={})),function(e){e.stateUpdate="GameModelStateUpdate",e.versusUpdate="GameModelVersusUpdate",e.roomUpdate="GameModelRoomUpdate",e.resultUpdate="GameModelResultUpdate",e.uuidUpdate="GameModelUuidUpdate"}(c||(c={})),function(e){e.stateUpdate="LineModelStateUpdate",e.minLengthUpdate="LineModelMinLengthUpdate",e.maxLengthUpdate="LineModelMaxLengthUpdate",e.thicknessUpdate="LineModelThicknessUpdate",e.uuidUpdate="LineModelUuidUpdate"}(h||(h={})),function(e){e.nameUpdate="OpponentModelNameUpdate",e.countryCodeUpdate="OpponentModelCountryCodeUpdate",e.fenceUpdate="OpponentModelFenceUpdate",e.areaUpdate="OpponentModelAreaUpdate",e.lineUpdate="OpponentModelLineUpdate",e.sideUpdate="OpponentModelSideUpdate",e.uuidUpdate="OpponentModelUuidUpdate"}(_||(_={})),function(e){e.nameUpdate="PlayerModelNameUpdate",e.countryCodeUpdate="PlayerModelCountryCodeUpdate",e.fenceUpdate="PlayerModelFenceUpdate",e.areaUpdate="PlayerModelAreaUpdate",e.lineUpdate="PlayerModelLineUpdate",e.sideUpdate="PlayerModelSideUpdate",e.uuidUpdate="PlayerModelUuidUpdate"}(g||(g={})),function(e){e.playerUpdate="PlayerSetModelPlayerUpdate",e.opponentUpdate="PlayerSetModelOpponentUpdate",e.playersUpdate="PlayerSetModelPlayersUpdate",e.feverUpdate="PlayerSetModelFeverUpdate",e.uuidUpdate="PlayerSetModelUuidUpdate"}(U||(U={})),function(e){e.statusUpdate="ResultModelStatusUpdate",e.wonUpdate="ResultModelWonUpdate",e.winnerUpdate="ResultModelWinnerUpdate",e.loserUpdate="ResultModelLoserUpdate",e.uuidUpdate="ResultModelUuidUpdate"}(f||(f={})),function(e){e.stateUpdate="RoomModelStateUpdate",e.statusUpdate="RoomModelStatusUpdate",e.ftueUpdate="RoomModelFtueUpdate",e.playerSetUpdate="RoomModelPlayerSetUpdate",e.ballSetUpdate="RoomModelBallSetUpdate",e.bonusSetUpdate="RoomModelBonusSetUpdate",e.tutorialUpdate="RoomModelTutorialUpdate",e.counterUpdate="RoomModelCounterUpdate",e.statsUpdate="RoomModelStatsUpdate",e.uuidUpdate="RoomModelUuidUpdate"}(m||(m={})),function(e){e.scoreUpdate="RoomStatsModelScoreUpdate",e.timeUpdate="RoomStatsModelTimeUpdate",e.uuidUpdate="RoomStatsModelUuidUpdate"}(b||(b={})),function(e){e.typeUpdate="SoldierModelTypeUpdate",e.stateUpdate="SoldierModelStateUpdate",e.fenceIdUpdate="SoldierModelFenceIdUpdate",e.livesUpdate="SoldierModelLivesUpdate",e.uuidUpdate="SoldierModelUuidUpdate"}(k||(k={})),function(e){e.uuidUpdate="TutorialModelUuidUpdate"}(v||(v={})),function(e){e.playerUpdate="VersusModelPlayerUpdate",e.opponentUpdate="VersusModelOpponentUpdate",e.uuidUpdate="VersusModelUuidUpdate"}(y||(y={})),function(e){e.nameUpdate="UserBioModelNameUpdate",e.languageUpdate="UserBioModelLanguageUpdate",e.countryCodeUpdate="UserBioModelCountryCodeUpdate",e.uuidUpdate="UserBioModelUuidUpdate"}(w||(w={})),function(e){e.bioUpdate="UserModelBioUpdate",e.ftueUpdate="UserModelFtueUpdate",e.stateUpdate="UserModelStateUpdate",e.statsUpdate="UserModelStatsUpdate",e.rankUpdate="UserModelRankUpdate",e.settingsUpdate="UserModelSettingsUpdate",e.uuidUpdate="UserModelUuidUpdate"}(M||(M={})),function(e){e.rankUpdate="UserRankModelRankUpdate",e.progressUpdate="UserRankModelProgressUpdate",e.uuidUpdate="UserRankModelUuidUpdate"}(S||(S={})),function(e){e.themeUpdate="UserSettingsModelThemeUpdate",e.soundUpdate="UserSettingsModelSoundUpdate",e.hapticUpdate="UserSettingsModelHapticUpdate",e.uuidUpdate="UserSettingsModelUuidUpdate"}(T||(T={})),function(e){e.winsUpdate="UserStatsModelWinsUpdate",e.defeatsUpdate="UserStatsModelDefeatsUpdate",e.xpUpdate="UserStatsModelXpUpdate",e.bestTimeUpdate="UserStatsModelBestTimeUpdate",e.bestScoreUpdate="UserStatsModelBestScoreUpdate",e.totalUpdate="UserStatsModelTotalUpdate",e.uuidUpdate="UserStatsModelUuidUpdate"}(B||(B={})),function(e){e.uuidUpdate="ObservableModelUuidUpdate"}(Z||(Z={})),function(e){e.userUpdate="StoreUserUpdate",e.gameUpdate="StoreGameUpdate",e.uuidUpdate="StoreUuidUpdate"}(x||(x={}))},9261:function(e,t,i){i.d(t,{X:function(){return l}});var s=i(6666),a=i(8545),n=i(6495),r=i(6007);const o={[r.Q2.light]:{bg:{gradient:{c1:"#ffc25e",c2:"#db7676",c3:"#3b0399"}},intro:{logo:{texture:n.P["intro-logo-light"]},play:{color:16761438}},tutorial:{fence:{color:16777215},protect:{line:16777215,ball:16777215,text:16761438,hand:16777215}},ui:{color:0},versus:{player:{fenceColor:16777215,nameColor:0},opponent:{fenceColor:0,nameColor:16777215},vs:{color:4570047},search:{color:16761705}},result:{winner:{fenceColor:16777215,nameColor:0,frameColor:4570047},loser:{fenceColor:0,nameColor:16777215,frameColor:4570047},status:{color:0},rematch:{color:16761705}},room:{players:{[r.cI.top]:{fence:{soldier:{bg:0,text:16777215},castle:{bg:0,anim:a.U.castle.animations["wreck black"]}},line:{color:0}},[r.cI.bottom]:{fence:{soldier:{bg:16777215,text:0},castle:{bg:16777215,anim:a.U.castle.animations["wreck white"]}},line:{color:16777215}}},divider:4570047}},[r.Q2.dark]:{bg:{gradient:{c1:"#3b0399",c2:"#db7676",c3:"#ffc25e"}},intro:{logo:{texture:n.P["intro-logo-dark"]},play:{color:4456851}},tutorial:{fence:{color:0},protect:{line:0,ball:0,text:4456851,hand:16777215}},ui:{color:16777215},versus:{player:{fenceColor:0,nameColor:16777215},opponent:{fenceColor:16777215,nameColor:0},vs:{color:4570047},search:{color:4456851}},result:{winner:{fenceColor:0,nameColor:16777215,frameColor:4570047},loser:{fenceColor:16777215,nameColor:0,frameColor:4570047},status:{color:16777215},rematch:{color:4456851}},room:{players:{[r.cI.top]:{fence:{soldier:{bg:16777215,text:0},castle:{bg:16777215,anim:a.U.castle.animations["wreck white"]}},line:{color:16777215}},[r.cI.bottom]:{fence:{soldier:{bg:0,text:16777215},castle:{bg:0,anim:a.U.castle.animations["wreck black"]}},line:{color:0}}},divider:4570047}}};const l=new class{constructor(){(0,s.Z)(this,"_theme",void 0)}updateTheme(e){this._theme=e}getBg(){return o[this._theme].bg}getIntro(){return o[this._theme].intro}getTutorial(){return o[this._theme].tutorial}getUi(){return o[this._theme].ui}getVersus(){return o[this._theme].versus}getRoomPlayers(e){return o[this._theme].room.players[e]}getRoomDivider(){return o[this._theme].room.divider}getResult(){return o[this._theme].result}}},3257:function(e,t,i){i.d(t,{Jv:function(){return a},co:function(){return n},l2:function(){return s}});const{app:s,platform:a,analytics:n}=window.globals},7679:function(e,t,i){i.d(t,{E:function(){return n},L:function(){return r}});var s=i(6666),a=i(3462);let n;!function(e){e.unknown="unknown",e.alive="alive",e.dead="dead"}(n||(n={}));class r extends a.t{constructor(e,t){super(e),(0,s.Z)(this,"_state",n.unknown),(0,s.Z)(this,"_lives",void 0),this._fenceId=t}get state(){return this._state}get fenceId(){return this._fenceId}get lives(){return this._lives}initialize(e){this.setLives(e),this.makeObservable("_lives","_state")}setLives(e){this._lives=e,this._state=this._lives>0?n.alive:n.dead}}},5479:function(e,t,i){i.d(t,{F:function(){return d}});var s=i(6666),a=(i(1939),i(5735),i(6886),i(9397)),n=i(3462),r=i(5552),o=i(3257);class l extends n.t{constructor(){super("BallModel"),(0,s.Z)(this,"_config",void 0),(0,s.Z)(this,"_damage",void 0),(0,s.Z)(this,"_radius",void 0),(0,s.Z)(this,"_position",void 0),(0,s.Z)(this,"_velocity",void 0),(0,s.Z)(this,"_playerId",void 0),(0,s.Z)(this,"_radiusTask",void 0),(0,s.Z)(this,"_killTask",void 0),(0,s.Z)(this,"_radiusTime",void 0),(0,s.Z)(this,"_killTime",void 0),(0,s.Z)(this,"_feverMode",void 0)}initialize(e){const{damage:t,radius:i,position:s,velocity:a}=e;this._config=e,this._damage=t,this._radius=i,this._position=s,this._velocity=a,this._feverMode=!1,this.makeObservable("_radius","_velocity","_playerId","_radiusTime","_killTime","_feverMode")}get config(){return this._config}get damage(){return this._damage}get radius(){return this._radius}get radiusTime(){return this._radiusTime}get killTime(){return this._killTime}get position(){return this._position}get velocity(){return this._velocity}get playerId(){return this._playerId}get feverMode(){return this._feverMode}disable(){this._velocity=new r.E9(0,0),this.stopRadiusTask(),this.stopKillTask()}destroy(){this.removeObservable()}setVelocity(e){this._velocity=(new r.E9).copyFrom(e)}setPlayerId(e){this._playerId=e}setRadius(e){this._radius=e}setDamage(e){this._damage=e}setFeverMode(e){this._feverMode=e}startRadiusTask(e){this._radiusTime=e,this._radiusTask=o.l2.ticker.delay({delay:1e3,repeat:e-1,callback:()=>{this._radiusTime=this._radiusTask.repeatCount}})}stopRadiusTask(){null!=this._radiusTask&&o.l2.ticker.cancel(this._radiusTask)}startKillTask(e){this._killTime=e,this._killTask=o.l2.ticker.delay({delay:1e3,repeat:e-1,callback:()=>{this._killTime=this._killTask.repeatCount}})}stopKillTask(){null!=this._killTask&&o.l2.ticker.cancel(this._killTask)}}class d extends n.t{constructor(){super("BallSetModel"),(0,s.Z)(this,"_config",void 0),(0,s.Z)(this,"_balls",[])}get balls(){return this._balls}get mainBall(){return this._balls[0]}get bonusBall(){return this._balls[1]}get speedFactor(){return this._config.speedFactor}initialize(e,t){this._config=e,this._createMainBall(t),this.makeObservable("_balls")}destroy(){this.removeObservable(),this._balls.forEach((e=>e.destroy())),this._balls.length=0,this._balls=null}isMainBall(e){return this.mainBall.uuid===e}getBallById(e){return this._balls.find((t=>t.uuid===e))}setBallPlayerId(e,t){const i=this.getBallById(e);null==i||i.setPlayerId(t)}setBallDamage(e,t){const i=this.getBallById(e);i.setDamage(i.damage*t)}setBallRadius(e,t){const i=this.getBallById(e);i.setRadius(i.radius*t)}setBallVelocity(e,t){this.getBallById(e).setVelocity(t)}disable(){this._balls.forEach((e=>e.disable()))}createBall(e){const t=new l;t.initialize(e),this._balls=[...this._balls,t]}removeBall(e){const t=this.getBallById(e);t.disable(),t.destroy(),this._balls.splice(this._balls.indexOf(t),1),this._balls=[...this._balls]}_createMainBall(e){const{damage:t,radius:i}=this._config,s={x:0,y:d.velocity.min*(e?-1:(0,a.Z)([1,-1]))};this.createBall({damage:t,radius:i,position:{x:.5,y:.5},velocity:s})}}(0,s.Z)(d,"velocity",{min:10,max:16})},5750:function(e,t,i){i.d(t,{T:function(){return n},X:function(){return r}});var s=i(6666),a=i(3462);let n;!function(e){e.unknown="unknown",e.init="init",e.show="show",e.idle="idle",e.hide="hide",e.active="active",e.passive="passive"}(n||(n={}));class r extends a.t{constructor(){super("BonusModel"),(0,s.Z)(this,"_config",void 0),(0,s.Z)(this,"_position",void 0),(0,s.Z)(this,"_state",n.unknown),(0,s.Z)(this,"_playerId",void 0),this.makeObservable("_state")}get config(){return this._config}get state(){return this._state}get type(){return this._config.type}get position(){return this._position}get playerId(){return this._playerId}get spawnTime(){return this._config.timing.spawn}get despawnTime(){return this._config.timing.despawn}get effectTime(){return this._config.timing.effect}initialize(e){this._config=e,this._position=e.position,this.setState(n.init),this.setState(n.show)}disable(){this.removeObservable()}destroy(){}setState(e){this._state=e}setPlayerId(e){this._playerId=e}reset(){}}},2552:function(e,t,i){i.d(t,{i:function(){return u},D:function(){return d}});var s=i(6666),a=i(3462),n=i(2706),r=i(5286),o=(i(3439),i(3257));class l extends a.t{constructor(){super("VersusModel"),(0,s.Z)(this,"_player",void 0),(0,s.Z)(this,"_opponent",void 0),this.makeObservable("_player","_opponent")}get player(){return this._player}get opponent(){return this._opponent}initialize(){}setPlayer(e){this._player=e}setOpponent(e){this._opponent=e}async startSearchingTimer(){return await new Promise((e=>{o.l2.ticker.delay({loop:!1,delay:1e3,callback:()=>{e()}})}))}async startIdleTimer(){return await new Promise((e=>{o.l2.ticker.delay({loop:!1,delay:1e3,callback:()=>{e()}})}))}}let d;!function(e){e.unknown="unknown",e.intro="intro",e.versus="versus",e.play="play",e.result="result"}(d||(d={}));class u extends a.t{constructor(){super("GameModel"),(0,s.Z)(this,"_state",d.unknown),(0,s.Z)(this,"_room",void 0),(0,s.Z)(this,"_versus",void 0),(0,s.Z)(this,"_result",void 0),this.makeObservable("_state","_room","_result")}get state(){return this._state}get versus(){return this._versus}get room(){return this._room}get result(){return this._result}initialize(e){this.setState(d.intro)}setState(e){this._state=e}createVersus(){this._versus=new l,this._versus.initialize()}destroyVersus(){this._versus.destroy(),this._versus=null}createResult(e){this._result=new n.Y(e),this._result.initialize()}destroyResult(){this._result.destroy(),this._result=null}createRoom(e,t,i){this._room=new r.r0,this._room.initialize(e,t,i)}destroyRoom(){var e;null===(e=this._room)||void 0===e||e.destroy(),this._room=null}}},3089:function(e,t,i){i.d(t,{V:function(){return n},W:function(){return r}});var s=i(6666),a=i(3462);let n;!function(e){e.unknown="unknown",e.idle="idle",e.hit="hit",e.drawStart="drawStart",e.drawEnd="drawEnd"}(n||(n={}));class r extends a.t{constructor(){super("LineModel"),(0,s.Z)(this,"_state",n.unknown),(0,s.Z)(this,"_config",void 0)}get state(){return this._state}initialize(e){this._config=e,this.setState(n.idle)}setState(e){this._state=e,this.makeObservable("_state")}get minLength(){return this._config.minLength}get maxLength(){return this._config.maxLength}get thickness(){return this._config.thickness}}},2706:function(e,t,i){i.d(t,{$:function(){return n},Y:function(){return r}});var s=i(6666),a=i(3462);let n;!function(e){e[e.unknown=1]="unknown",e[e.cancel=2]="cancel",e[e.playerRematchRequest=3]="playerRematchRequest",e[e.playerRematchApprove=4]="playerRematchApprove",e[e.playerRematchReject=5]="playerRematchReject",e[e.opponentRematchRequest=6]="opponentRematchRequest",e[e.opponentRematchApprove=7]="opponentRematchApprove",e[e.opponentRematchReject=8]="opponentRematchReject"}(n||(n={}));class r extends a.t{constructor(e){super("ResultModel"),(0,s.Z)(this,"_status",n.unknown),this._config=e,this.makeObservable("_status")}get status(){return this._status}get won(){return this.winner.uuid===this._config.playerId}get winner(){return this._config.winner}get loser(){return this._config.loser}initialize(){}setStatus(e){this._status=e}}},5286:function(e,t,i){i.d(t,{r0:function(){return y},os:function(){return k},J7:function(){return v}});var s=i(6666),a=i(2793),n=i(3462),r=i(5479),o=i(5552),l=i(9397),d=i(5285),u=i(6007),p=i(3257),c=i(5750);class h extends n.t{constructor(){super("BonusSetModel"),(0,s.Z)(this,"_config",void 0),(0,s.Z)(this,"_bonus",void 0),(0,s.Z)(this,"_spawnTask",void 0),(0,s.Z)(this,"_despawnTask",void 0),(0,s.Z)(this,"_bonusEffectTask",void 0)}get bonus(){return this._bonus}initialize(e,t){this._config=e,this.makeObservable("_bonus","_active")}destroy(){var e;this.removeObservable(),null===(e=this._bonus)||void 0===e||e.destroy(),this._bonus=null,this._spawnTask=null,this._despawnTask=null,this._bonusEffectTask=null}disable(){this._despawnBonus(),this.disableTasks()}setBonusPlayerId(e,t){var i;null===(i=this._bonus)||void 0===i||i.setPlayerId(t)}startBonusEffectTask(){this.cancelBonusEffectTask(),this._bonusEffectTask=p.l2.ticker.delay({delay:this._config.timing[this._bonus.type].effect*o.wI,callback:()=>{this._bonus.setState(c.T.passive)}})}startSpawnTask(){this.cancelSpawnTask();const e=(0,l.Z)(Object.values(u.Do));this._spawnTask=p.l2.ticker.delay({delay:this._config.timing[e].spawn*o.wI,callback:()=>{this._spawnBonus(e),this.startDespawnTask()}})}startDespawnTask(){this.cancelDespawnTask(),this._despawnTask=p.l2.ticker.delay({delay:this._config.timing[this._bonus.type].despawn*o.wI,callback:()=>{this._despawnBonus(),this.startSpawnTask()}})}cancelSpawnTask(){null!=this._spawnTask&&p.l2.ticker.cancel(this._spawnTask)}cancelDespawnTask(){null!=this._despawnTask&&p.l2.ticker.cancel(this._despawnTask)}cancelBonusEffectTask(){null!=this._bonusEffectTask&&p.l2.ticker.cancel(this._bonusEffectTask)}destroyBonus(){this._bonus.destroy(),this._bonus=null}disableTasks(){this.cancelSpawnTask(),this.cancelDespawnTask(),this.cancelBonusEffectTask()}_spawnBonus(e){const{spawn:t,despawn:i,effect:s}=this._config.timing[e],a={type:e,position:{x:(0,d.Z)(.1,.9),y:(0,d.Z)(.22,.78)},timing:{spawn:t,despawn:i,effect:s}};this._bonus=new c.X,this._bonus.initialize(a)}_despawnBonus(){var e;null===(e=this._bonus)||void 0===e||e.setState(c.T.hide)}}class _ extends n.t{constructor(){super("CounterModel"),(0,s.Z)(this,"_time",void 0),(0,s.Z)(this,"_remaining",void 0),(0,s.Z)(this,"_tickerTask",void 0)}get time(){return this._time}get remaining(){return this._remaining}initialize(e,t){this._time=e.time+(t?1:0),this.makeObservable("_remaining")}destroy(){this.removeObservable()}startCountdown(){this._remaining=this._time,this._startCountdown()}_startCountdown(){this._tickerTask=p.l2.ticker.delay({delay:1e3,repeat:Math.max(0,this._time-1),callback:()=>{this._remaining=this._tickerTask.repeatCount}})}}i(1939);var g=i(1739);class U extends n.t{constructor(){super("FeverModel"),(0,s.Z)(this,"_config",void 0),(0,s.Z)(this,"_progress",void 0),(0,s.Z)(this,"_playerId",void 0),(0,s.Z)(this,"_ballId",void 0),(0,s.Z)(this,"_active",void 0),(0,s.Z)(this,"_idleTimer",void 0)}get config(){return this._config}get progress(){return this._progress}get active(){return this._active}get playerId(){return this._playerId}get ballId(){return this._ballId}initialize(e){this._config=e,this.setProgress(e.initial),this.setActive(!1),this.makeObservable("_progress","_active")}disable(){this.removeObservable(),this.stopIdleTimer()}destroy(){}setProgress(e){this._progress=(0,g.Z)(e,0,1),this._active=0===this._progress||1===this._progress}setActive(e){this._active=e}setPlayerId(e){this._playerId=e}setBallId(e){this._ballId=e}startIdleTimer(){this._idleTimer=p.l2.ticker.delay({delay:this._config.activeTime*o.wI,callback:()=>{this._active=!1,this._progress=.5}})}stopIdleTimer(){null!=this._idleTimer&&p.l2.ticker.cancel(this._idleTimer)}}class f extends n.t{constructor(){super("PlayerSetModel"),(0,s.Z)(this,"_fever",void 0),(0,s.Z)(this,"_player",void 0),(0,s.Z)(this,"_opponent",void 0),(0,s.Z)(this,"_players",void 0)}get player(){return this._player}get opponent(){return this._opponent}get players(){return this._players}get fever(){return this._fever}initialize(e,t,i,s){this._player=e,this._opponent=t;const a=this._generatePlayerConfig(this._player,i,!1,s),n=this._generatePlayerConfig(this._opponent,i,!0,s);this._player.join(a),this._opponent.join(n),this._players=[e,t],this._fever=new U,this._fever.initialize(i.fever),this.makeObservable("_player","_opponent")}disable(){this._fever.disable()}destroy(){this.removeObservable(),this._fever.destroy(),this._players.forEach((e=>e.destroy())),this._players=null}getLineById(e){return this._player.line.uuid===e?this._player.line:this._opponent.line}getFenceById(e){return this._player.fence.uuid===e?this._player.fence:this._opponent.fence}getPlayerById(e){return this._player.uuid===e?this._player:this._opponent}getPlayerBySide(e){return this._player.side===e?this._player:this.opponent}getPlayerByLineId(e){return this._player.line.uuid===e?this._player:this._opponent}getPlayerByFenceId(e){return this._player.fence.uuid===e?this._player:this._opponent}_generatePlayerConfig(e,t,i,s){const{fence:a,area:n,line:r}=t;return{fence:{castle:a.castle,soldiers:s?i?a.soldiers.ftue.opponent:a.soldiers.ftue.player:(0,l.Z)(a.soldiers.classic),flag:u.id.get(e.countryCode)},area:n,line:r}}}class m extends n.t{constructor(){super("RoomStatsModel"),(0,s.Z)(this,"_score",void 0),(0,s.Z)(this,"_startTime",void 0),(0,s.Z)(this,"_endTime",void 0)}get score(){return this._score}get time(){return this._endTime-this._startTime}initialize(){this._score=0,this._startTime=0,this._endTime=0}setScore(e){this._score=e}setStartTime(e){this._startTime=e}setEndTime(e){this._endTime=e}}class b extends n.t{constructor(){super("TutorialModel")}initialize(){}destroy(){this.removeObservable()}}let k,v;!function(e){e.unknown="unknown",e.init="init",e.idle="idle",e.tutorial="tutorial",e.counter="counter",e.play="play",e.over="over",e.result="result"}(k||(k={})),function(e){e.unknown="unknown",e.win="win",e.defeat="defeat"}(v||(v={}));class y extends n.t{constructor(){super("RoomModel"),(0,s.Z)(this,"_ftue",void 0),(0,s.Z)(this,"_state",k.unknown),(0,s.Z)(this,"_status",v.unknown),(0,s.Z)(this,"_stats",void 0),(0,s.Z)(this,"_tutorial",void 0),(0,s.Z)(this,"_counter",void 0),(0,s.Z)(this,"_playerSet",void 0),(0,s.Z)(this,"_ballSet",void 0),(0,s.Z)(this,"_bonusSet",void 0),this.makeObservable("_state","_status","_playerSet","_ballSet","_bonusSet","_tutorial")}get state(){return this._state}get status(){return this._status}get ftue(){return this._ftue}get playerSet(){return this._playerSet}get ballSet(){return this._ballSet}get bonusSet(){return this._bonusSet}get tutorial(){return this._tutorial}get counter(){return this._counter}get stats(){return this._stats}initialize(e,t,i){const{balls:s,players:n,bonuses:o,counter:l}=a.L.jsons["room-config"].default;this.setState(k.init),this._ftue=i,this._stats=new m,this._stats.initialize(),this._playerSet=new f,this._playerSet.initialize(e,t,n,i),this._ballSet=new r.F,this._ballSet.initialize(s,i),this._bonusSet=new h,this._bonusSet.initialize(o,i),this._counter=new _,this._counter.initialize(l,i),this.setState(k.idle),this.setState(i?k.tutorial:k.counter)}disable(){this._ballSet.disable(),this._bonusSet.disable(),this._playerSet.disable()}setState(e){this._state=e}setStatus(e){this._status=e}createTutorial(){this._tutorial=new b,this._tutorial.initialize()}destroyTutorial(){this._tutorial.destroy(),this._tutorial=null}destroy(){this.removeObservable(),this._ballSet.destroy(),this._bonusSet.destroy(),this._playerSet.destroy(),this._counter.destroy(),this._ballSet=null,this._bonusSet=null,this._playerSet=null,this._counter=null}}},3462:function(e,t,i){i.d(t,{t:function(){return r}});var s=i(6666),a=(i(5735),i(6886),i(2259)),n=i(3882);class r{constructor(e,t){(0,s.Z)(this,"__name__",void 0),(0,s.Z)(this,"_uuid",void 0),this.__name__=e,this._uuid=null!=t?t:(0,n.Z)(this.__name__)}get uuid(){return this._uuid}makeObservable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.q.observe.makeObservable(this,...t)}createObservable(e,t){a.q.observe.createObservable(this,e,t)}removeObservable(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];a.q.observe.removeObservable(this,...t)}initialize(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i]}destroy(){}}},2889:function(e,t,i){i.d(t,{h:function(){return d}});var s=i(6666),a=i(3257),n=i(2552),r=i(3462),o=i(2216);class l extends r.t{constructor(){super("Store"),(0,s.Z)(this,"_user",void 0),(0,s.Z)(this,"_game",void 0),this.makeObservable("_user","_game")}get user(){return this._user}get game(){return this._game}initUserModel(e){this._user=new o.T,this._user.initialize(a.Jv.getUserBio(),e)}initGameModel(e){this._game=new n.i,this._game.initialize(e)}}const d=new l},2216:function(e,t,i){i.d(t,{T:function(){return c},a:function(){return p}});var s=i(6666),a=i(3462);class n extends a.t{constructor(){super("UserBioModel"),(0,s.Z)(this,"_name",void 0),(0,s.Z)(this,"_language",void 0),(0,s.Z)(this,"_countryCode",void 0)}initialize(e){const{name:t,language:i,countryCode:s}=e;this._name=t,this._language=i,this._countryCode=s}get name(){return this._name}get language(){return this._language}get countryCode(){return this._countryCode}setName(e){this._name=e}setLanguage(e){this._language=e}setCountryCode(e){this._countryCode=e}}var r=i(9893),o=i(6007);class l extends a.t{constructor(){super("UserRankModel"),(0,s.Z)(this,"_rank",void 0),(0,s.Z)(this,"_progress",void 0),this.makeObservable("_rank","_progress")}get rank(){return this._rank}get progress(){return this._progress}initialize(e){this.updateRankInfo(e)}updateRankInfo(e){this._rank=l.xp2Rank(e),this._progress=l.getProgress(e,this._rank)}}(0,s.Z)(l,"xp2Rank",(e=>{var t;return null!==(t=(0,r.Z)(o.xq,(t=>t<e/350)))&&void 0!==t?t:o.Xm.iron})),(0,s.Z)(l,"getNextRank",(e=>{const t=Object.keys(o.xq);return t[t.indexOf(e)+1]})),(0,s.Z)(l,"getProgress",((e,t)=>{const i=350*o.xq[t];return(e-i)/(350*o.xq[l.getNextRank(t)]-i)}));class d extends a.t{constructor(){super("UserSettingsModel"),(0,s.Z)(this,"_theme",void 0),(0,s.Z)(this,"_sound",void 0),(0,s.Z)(this,"_haptic",void 0),this.makeObservable("_theme","_sound","_haptic")}get theme(){return this._theme}get sound(){return this._sound}get haptic(){return this._haptic}initialize(e){const{theme:t,sound:i,haptic:s}=e;this._theme=t,this._haptic=0!==s,this._sound=0!==i}setTheme(e){this._theme=e}setSound(e){this._sound=e}setHaptic(e){this._haptic=e}serialize(){const{theme:e,sound:t,haptic:i}=this;return{theme:e,sound:t?1:0,haptic:i?1:0}}}class u extends a.t{constructor(e){super("UserStatsModel"),(0,s.Z)(this,"_xp",void 0),(0,s.Z)(this,"_wins",void 0),(0,s.Z)(this,"_defeats",void 0),(0,s.Z)(this,"_bestTime",void 0),(0,s.Z)(this,"_bestScore",void 0),this._data=e,this.makeObservable("_xp")}get wins(){return this._wins}get defeats(){return this._defeats}get xp(){return this._xp}get bestTime(){return this._bestTime}get bestScore(){return this._bestScore}get total(){return this._wins+this._defeats}initialize(){const{xp:e,wins:t,defeats:i,bestScore:s,bestTime:a}=this._data;this._xp=e,this._wins=t,this._defeats=i,this._bestTime=a,this._bestScore=s}setWins(e){this._wins=e}setDefeats(e){this._defeats=e}setXP(e){this._xp=e}setBestScore(e){this._bestScore=e}setBestTime(e){this._bestTime=e}serialize(){const{xp:e,wins:t,defeats:i,bestTime:s,bestScore:a}=this;return{xp:e,wins:t,defeats:i,bestTime:s,bestScore:a}}}let p;!function(e){e.unknown="unknown",e.idle="idle"}(p||(p={}));class c extends a.t{constructor(){super("UserModel"),(0,s.Z)(this,"_state",p.unknown),(0,s.Z)(this,"_ftue",void 0),(0,s.Z)(this,"_bio",void 0),(0,s.Z)(this,"_rank",void 0),(0,s.Z)(this,"_stats",void 0),(0,s.Z)(this,"_settings",void 0),this.makeObservable("_state","_info")}get bio(){return this._bio}get ftue(){return this._ftue}get state(){return this._state}get stats(){return this._stats}get rank(){return this._rank}get settings(){return this._settings}initialize(e,t){const{stats:i,settings:s,ftue:a}=t;this._bio=new n,this._bio.initialize(e),this._stats=new u(i),this._stats.initialize(),this._settings=new d,this._settings.initialize(s),this._rank=new l,this._rank.initialize(i.xp),this._ftue=0!==a,this._state=p.idle}setFtue(e){this._ftue=e}serialize(){const{stats:e,settings:t,ftue:i}=this;return{ftue:i?1:0,stats:e.serialize(),settings:t.serialize()}}}},9218:function(e){e.exports=JSON.parse('{"extensions":{"physics2dDebugger":{"enabled":false},"physics3dDebugger":{"enabled":false},"legoLogger":{"enabled":false},"gui":{"enabled":false,"open":false},"stats":{"enabled":false,"panels":{"fps":true,"memory":false,"draws":false,"textures":false,"programs":false,"geometries":false}}},"screen":{"portrait":{"width":1125,"height":1900,"enabled":true},"landscape":{"width":1900,"height":1125,"enabled":false},"ratio":{"mobile":{"min":0.46,"max":0.75},"desktop":{"min":0.46,"max":0.6}}},"compression":{"images":{"assets/**/*.jpeg":{"quant":{"numColors":256,"dither":1},"mozjpeg":{"quality":65}},"assets/**/*.jpg":{"quant":{"numColors":256,"dither":1},"mozjpeg":{"quality":75}},"assets/**/*.png":{"quant":{"numColors":256,"dither":1},"oxipng":{"level":4}}},"sounds":{"assets/**/*.mp3":{"bitrate":64}}},"localization":{"fallback":"en","supported":["en"]},"load":{"main":{"generic":{"sounds":["button"],"fonts":["HelveticaRegular","HelveticaLight","HelveticaBold"]},"pixi":{"atlases":["main"],"images":[],"sounds":[],"spines":["castle","shield"],"fonts":[]},"three":{"models":[],"textures":[]}},"extra":{"generic":{"sounds":["theme","line-draw","line-hit","player-brick-hit","player-castle-hit","opponent-brick-hit","opponent-castle-hit"],"fonts":[]},"pixi":{"atlases":["extra"],"sounds":[],"images":[],"spines":[],"fonts":[]},"three":{"models":[],"textures":[]}}}}')}}]);